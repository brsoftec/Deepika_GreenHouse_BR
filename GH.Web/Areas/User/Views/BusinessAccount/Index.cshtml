@*<!--@formatter:off-->*@
<!--
@{
    ViewBag.Title = "Business Home";
    Layout = "~/Areas/User/Views/Shared/_LayoutWideBusinessApply.cshtml";
    ViewBag.NgApp = "feedApp";
    Session["ViewTier"] = "business";
}

@section styles{
    <link href="~/Content/css/jquery.fancybox-plus.css" rel="stylesheet"/>
    <link href="@Url.Versioned("~/Areas/Beta/css/home.css")" rel="stylesheet"/>
    @Styles.Render("~/bundles/css/feed")
    @Styles.Render("~/regitCampaign/css")
    <link rel="stylesheet" href="@Url.Versioned("~/Areas/Beta/css/interaction.css")">
    <link rel="stylesheet" href="@Url.Versioned("~/Areas/Beta/css/social.css")">
}

@section prescripts {
    
}

@section initscripts {
    <script src="~/Content/scripts/jquery.fancybox-plus.min.js"></script>
    <script src="~/Content/scripts/ng-infinite-scroll.min.js"></script>

    <script>
        angular.module('feedApp',['myApp', 'interaction', 'infinite-scroll']);
    </script>

}

@section scripts {

    <script src="@Url.Versioned("~/Areas/User/Scripts/Controllers/ProfileController.js")"></script>
    <script src="@Url.Versioned("~/Areas/User/Scripts/Controllers/HomeFeedController.js")"></script>
    <script src="@Url.Versioned("~/Areas/User/Scripts/Controllers/HelpIntroController.js")"></script>

    <script src="@Url.Versioned("~/Areas/User/Scripts/Services/BusinessAccountService.js")"></script>
    <script src="@Url.Versioned("~/Areas/User/Scripts/Controllers/business-home-ctrl.js")"></script>
    <script src="@Url.Versioned("~/Areas/User/Scripts/Controllers/InteractionFormController.js")"></script>

    @Scripts.Render("~/bundles/BusinessUserSystem")
    @Scripts.Render("~/bundles/NewFeeds")


    <script src="@Url.Versioned("~/Areas/regitUI/js/modules/social.js")"></script>

}
-->

@*<!--@formatter:on-->*@


@section left {

    <div class="module module-left module-profile" ng-controller="BusinessProfileController">

        <div class="feed-profile-header clearfix">
            <img ng-if="!businessProfile.avatar" class="feed-profile-avatar thumbnail"
                 ng-src="{{businessProfile.avatar | avatarUrl:true}}">
            <a ng-show="businessProfile.avatar" class="profile-avatar-link" href="{{userBusiness.PhotoUrl}}"
               title="{{businessProfile.displayName}}'s Profile Picture">
                <img class="feed-profile-avatar thumbnail"
                     ng-src="{{businessProfile.avatar | avatarUrl:true}}">
            </a>

            <div class="feed-profile-name">{{businessProfile.displayName}}</div>
            <a href="/BusinessAccount/Settings" class="feed-profile-edit">Edit Profile</a>
            <a href="BusinessAccount/Profile/{{businessProfile.id}}" class="feed-profile-edit">View Public Profile</a>
        </div>
        <div class="feed-profile-details business-feed-profile-details">
            <div class="feed-profile-heading">About Us</div>
            <div class="feed-profile-about" ng-bind-html="businessProfile.description | textToHtml">

            </div>
            <div class="feed-profile-fields">
                <div class="feed-profile-field feed-profile-field-phone">{{businessProfile.publicPhone}}</div>
                <div class="feed-profile-field feed-profile-field-email">
                    <a ng-if="businessProfile.publicEmail"
                       href="mailto:{{businessProfile.publicEmail}}">
                        {{businessProfile.publicEmail}}
                    </a>
                </div>
                <div class="feed-profile-field feed-profile-field-website">
                    <a ng-if="businessProfile.website"
                       href="{{businessProfile.website | properUrl}}"
                       target="_blank">
                        {{businessProfile.website}}
                    </a>
                </div>
                <div class="feed-profile-field feed-profile-field-opening" ng-bind-html="profile.WorkTime | workTime"></div>
                <div class="feed-profile-field feed-profile-field-address"
                     ng-bind-html="businessProfile.location | locationToHtml">
                </div>
            </div>

            <div class="feed-profile-about">
            </div>

        </div>
    </div>

    <div ng-controller="PushVaultBusinessController"
         class="module module-left module-push">

        <a href="#" class="btn-push" ng-click="$event.preventDefault();openSRFIList()"
           popover-placement="bottom" popover-trigger="'outsideClick'"
           popovertitle="" uib-popover-template="'pushVault-select.html'"
           popover-is-open="showingPushToVaultSelect">
            Push To Vault<span class="badge" ng-bind="pushtovaults.length"></span>
        </a>
    </div>
    <script type="text/ng-template" id="pushVault-select.html">
        <div class="srfi-select">
            <ul>
                <li ng-repeat="pustovault in pushtovaults">
                    <a href="#" ng-click="$event.preventDefault();selectPushToVault(pustovault)"
                       ng-bind="pustovault.Name"></a>
                </li>
            </ul>

        </div>
    </script>
    <!-- vu-->
    <div ng-controller="SRFIBusinessController">

        <div ng-if="srfis.length" class="module module-left module-srfi">
            <h4 class="module-heading">FORMS</h4>
            <a href="#" class="btn-srfi" ng-click="$event.preventDefault();openSRFIList()"
               popover-placement="bottom" popover-trigger="'outsideClick'"
               popovertitle="" uib-popover-template="'srfi-select.html'"
               popover-is-open="showingSRFISelect">
                Request Information
            </a>
        </div>
    </div>
    <script type="text/ng-template" id="srfi-select.html">
    <div class="srfi-select">
        <ul>
            <li ng-repeat="srfi in srfis">
                <a href="#" ng-click="$event.preventDefault();selectSRFI(srfi)" ng-bind="srfi.Name"></a>
            </li>
        </ul>
    </div>
</script>

    <div class="module module-left module-quicklinks">
        <h4 class="module-heading">Quick Links</h4>
        <div class="quicklinks ist-group">
            <a class="list-group-item list-group-item-action" href="/Campaign/ManagerCampaign">Interaction Module</a>
            <a class="list-group-item list-group-item-action" href="/BusinessAccount/Settings">Account Settings</a>
            <a class="list-group-item list-group-item-action" href="/Interactions/Customers">Manage Customers</a>
            <a class="list-group-item list-group-item-action" href="/BusinessAccount/ManageRequest">Manage Handshake Requests</a>

        </div>
    </div>


}
@*BODY*@
@section body {
    <div ng-controller="HomeFeedController">
        @if (ViewBag.ViewPreferences != null && ViewBag.ViewPreferences.ShowBusinessIntroSlides == true)
        {
            <div class="help-intro-container" ng-controller="HelpIntroController">
            </div>
        }

        <div class="module module-main module-business-dashboard">

            <div class="dashboard-intro">
                <div class="dashboard-intro-heading">Create an Interaction</div>
                <div class="dashboard-intro-text">
                    Get started doing business now. Engage customers with a Regit interaction.
                </div>
            </div>
            <div class="interaction-dashboard">

                <a href="/Interactions/New/Broadcast" class="interaction-cta interaction-cta-ad">Broadcast</a>
                <a href="/Interactions/New/Event" class="interaction-cta interaction-cta-evt">Event</a>
                <a href="/Interactions/New/Registration" class="interaction-cta interaction-cta-reg last-in-row">Registration</a>
                <div class="dashboard-divider"></div>
                <a href="/Interactions/New/SRFI" class="interaction-cta interaction-cta-srfi">Static Form (SRFI)</a>
                <a href="/Interactions/New/Handshake" class="interaction-cta interaction-cta-sync">Handshake</a>
                <a href="/Interactions/New/PushToVault" class="interaction-cta interaction-cta-push last-in-row">Push Form</a>
            </div>

            <div class="interaction-dashboard dashboard-section">
                <a href="/Campaign/ManagerCampaign" class="interaction-cta interaction-cta-manager">Interactions Manager</a>
                <a href="/Workflow" class="interaction-cta business-cta-workflow">Workflow</a>
                <a href="/ActivityLog/Business" class="interaction-cta business-cta-activity-log last-in-row">Activity Log</a>
            </div>

        </div>

        @if (ViewBag.IsBusinessMaster == true && ViewBag.NoAvatar == true)
        {
            <div class="module module-main module-closable module-intro module-intro-1">
                <button type="button" ng-click="closeModule($event)" class="module-close"></button>

                <div class="intro-welcome">Hello, {{userBusiness.DisplayName}}</div>
                <div class="intro-heading">
                    Upload your business logo
                </div>
                <div class="intro-picture-container">
                    <div class="intro-picture">
                        <img class="intro-picture-img"
                             ng-src="{{userBusiness.PhotoUrl | avatarUrl:true}}">
                    </div>
                    <div class="intro-picture-actions">
                        <a href="/BusinessAccount/Settings#profile" class="add-photo-action">Add Photo</a>
                        <p class="intro-picture-settings-link">
                            Or go to <a href="/BusinessAccount/Settings">Account Management</a> to update your business information
                        </p>
                    </div>
                </div>
            </div>
        }
        <interaction-feed type="business"></interaction-feed>

    </div>
}